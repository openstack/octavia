- job:
    name: octavia-v2-dsvm-noop-api-unmaintained-2023-1
    parent: octavia-v2-dsvm-noop-api
    nodeset: octavia-single-node-ubuntu-jammy
    vars: &advanced_rbac_vars
      devstack_local_conf:
        test-config:
          "$TEMPEST_CONFIG":
            load_balancer:
              RBAC_test_type: advanced

- project-template:
    name: octavia-tox-tips
    check:
      jobs:
        - octavia-tox-py39-tips
        - octavia-tox-functional-py39-tips

- job:
    name: octavia-tox-py39-tips
    parent: openstack-tox-py39
    description: |
      Run tox python 3.9 unit tests against master of related libraries.
    vars:
      tox_install_siblings: true
      zuul_work_dir: src/opendev.org/openstack/octavia
    required-projects:
      - openstack/octavia-lib
      - openstack/octavia

- job:
    name: octavia-tox-functional-py39-tips
    parent: openstack-tox-functional-py39
    description: |
      Run tox python 3.9 functional against master of related libraries.
    vars:
      tox_install_siblings: true
      zuul_work_dir: src/opendev.org/openstack/octavia
    required-projects:
      - openstack/octavia-lib
      - openstack/octavia

- job:
    name: openstack-tox-pip-check-reqs
    parent: openstack-tox
    description: |
      Run pip-missing-reqs and pip-extra-reqs tests to check for missing or
      extra requirements.txt entries.

      Uses tox with the ``pip-missing-reqs``  and ``pip-extra-reqs``
      environments.
    required-projects:
        - openstack/octavia
    vars:
      tox_envlist: pip-missing-reqs,pip-extra-reqs

- job:
    name: octavia-v2-dsvm-noop-api-unmaintained-2023-1
    parent: octavia-v2-dsvm-noop-api
    nodeset: octavia-single-node-ubuntu-jammy
    vars: *advanced_rbac_vars

- job:
    name: octavia-v2-dsvm-scenario-unmaintained-2023-1
    parent: octavia-v2-dsvm-scenario
    nodeset: octavia-single-node-ubuntu-jammy
    vars: *advanced_rbac_vars

- job:
    name: octavia-v2-dsvm-scenario-traffic-ops-unmaintained-2023-1
    parent: octavia-v2-dsvm-scenario-unmaintained-2023-1
    vars:
      tempest_test_regex: ^octavia_tempest_plugin.tests.scenario.v2.*traffic_ops

- job:
    name: octavia-v2-dsvm-scenario-non-traffic-ops-unmaintained-2023-1
    parent: octavia-v2-dsvm-scenario-unmaintained-2023-1
    vars:
      tempest_test_regex: ^octavia_tempest_plugin.tests.scenario.v2.(?!.*traffic_ops)

- job:
    name: octavia-v2-dsvm-tls-barbican-unmaintained-2023-1
    parent: octavia-v2-dsvm-tls-barbican
    nodeset: octavia-single-node-ubuntu-jammy
    vars: *advanced_rbac_vars
